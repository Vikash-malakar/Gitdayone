from django.shortcuts import render,redirect
from django .http import HttpResponse,JsonResponse
import json
import csv
import io
import zipfile
from django.urls import reverse
from urllib.parse import urlencode



def landingpge(request):
    return HttpResponse ("heLLO ")

def html(req):
     return HttpResponse("<h1>Welcome to My Site</h1>")


def json_response(request):
  data = {"name": "Neeraj", 'role': 
"Developer","Active1":True,"Active2":False,"Active3":None}
  json_data = json.dumps(data)
  return HttpResponse(json_data,content_type="application/json")




def download_csv(request):
    response = HttpResponse(content_type='text/csv')
    response['Content-Disposition'] = 'attachment; filename="employees.csv"'
    writer = csv.writer(response)
    writer.writerow(['Name', 'Department', 'Salary'])
    writer.writerow(['Neeraj', 'IT', 50000])
    writer.writerow(['Ravi', 'HR', 40000])
    return response





# Create your views here.

# def my_render(req,name,age,qualification):
#     data={
#          'n':name,
#          'a':age,
#          'q':qualification
#     }
#     return render(req,"my_render.html",data)


# def my_json(req):
#     data={ "active" : True,
#            "active" : False,
#             "active" : None,

#     }
#     return JsonResponse(data)
 


# def my_json(req):
#     # data = "python+language"
#     # data = "python+language"
#     data = (1,2,3,45,6,6)
#     data = [1,2,3,45,6,6]
#     # data = {1,2,3,45,6,'vikash'}


    
#     return JsonResponse(data,safe=False)
 

# def my_redirect(req):

#     return redirect("https://github.com/")



def download_zip(request):
    buffer = io.BytesIO()
    with zipfile.ZipFile(buffer, 'w') as zip_file:
        zip_file.writestr('hello.txt', 'This is inside the ZIP file.')
        zip_file.writestr('readme.txt', 'Generated by Django!')
    response = HttpResponse(buffer.getvalue(), content_type='application/zip')
    response['Content-Disposition'] = 'attachment; filename="files.zip"'
    return response


def my_redirect(req):
    url=reverse('my_redirect2')
    
    data = urlencode({'name': 'vikash', 'age': 12})
    return redirect(f'{url}?{data}')




def my_redirect2(req):
    # print("hello")
    print(req.GET)
    print(req.method)

    